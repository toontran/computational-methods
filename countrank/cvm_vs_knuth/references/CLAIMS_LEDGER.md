# CLAIMS_LEDGER.md

| Alg           | Short Claim                                  | Formal Statement / Ref                                                                                      | Where (section/page/eq/line)                       | Inputs / Assumptions                                   | Symbols used                                                          | Suggested test idea in 1 line                                                     |                    |                                                                                     |            |                                                  |      |                     |
| ------------- | -------------------------------------------- | ----------------------------------------------------------------------------------------------------------- | -------------------------------------------------- | ------------------------------------------------------ | --------------------------------------------------------------------- | --------------------------------------------------------------------------------- | ------------------ | ----------------------------------------------------------------------------------- | ---------- | ------------------------------------------------ | ---- | ------------------- |
| CVM           | PAC tail guarantee                           | `P(                                                                                                         | R ‚àí A                                              | > Œµ¬∑A) ‚â§ Œ¥`                                            | theorem `correctness` lines show/hypothesis incl. buffer size bound:  | Œµ,Œ¥‚àà(0,1); buffer size n‚â•(12/Œµ¬≤)¬∑ln(3‚Ñì/Œ¥)                                         | Œµ,Œ¥, A=            | set(xs)                                                                             | , ‚Ñì=length | Simulate CVM on random streams; count runs where | R‚àíF‚ÇÄ | >ŒµF‚ÇÄ ‚â§ Œ¥.           |
| CVM           | Space bound (bits)                           | Space O(Œµ‚Åª¬≤¬∑b¬∑ln(Œ¥‚Åª¬π¬∑‚Ñì))                                                                                    | CVM overview:                                      | Stores b-bit keys; ‚Ñì stream length                     | b,‚Ñì,Œµ,Œ¥                                                               | Measure peak bytes vs. Œµ,Œ¥,‚Ñì; fit to Œµ‚Åª¬≤ ln(‚Ñì/Œ¥).                                 |                    |                                                                                     |            |                                                  |      |                     |
| CVM           | Functional invariant (cutoff fairness)       | For each item s: ùêÑ[p‚Åª¬π¬∑X_s]=1                                                                              | Eq. (2) and justification:                         | After first hit & through subsampling                  | X_s‚àà{0,1}, p‚àà(0,1]                                                    | Track p and membership of a tagged key; verify running mean of p‚Åª¬π¬∑X_s ‚âà 1.       |                    |                                                                                     |            |                                                  |      |                     |
| CVM           | Subsampling step (independent halving)       | Each item independently kept w.p. 1/2 when buffer too large; p halves                                       | Lines describing step and invariant preservation:  | Triggered when buffer exceeds threshold                | p, œá (buffer)                                                         | Count survivors after subsampling vs. Binomial(                                   | œá                  | ,1/2); check p‚Üíp/2.                                                                 |            |                                                  |      |                     |
| CVM           | Unbiasedness (total variant)                 | `expectation (run-algo xs) id = card(set xs)`                                                               | theorem `unbiasedness`:                            | Uses modified subsampling (choose random m-subset)     | R (output), A=                                                        | set                                                                               |                    | Implement total-variant subsample-by-choice; estimate mean R over many runs ‚âà F‚ÇÄ.   |            |                                                  |      |                     |
| CVM           | Total variant + unbiased + motivation        | Variant selects a random m-subset; becomes total and unbiased                                               | Contribution summary:                              | Replace per-item coin flips by equiprobable m-subset   | œá (buffer), m                                                         | Compare failure rate (‚ä•) of original vs. 0 for variant; verify unbiasedness.      |                    |                                                                                     |            |                                                  |      |                     |
| CVM           | Transfer of bounds to original (Œ¥/2 guard)   | Probability bounds for total variant transfer to original with +Œ¥/2                                         | Note on correction:                                | Removing failure check changes guarantees by ‚â§Œ¥/2      | Œ¥                                                                     | Re-run proofs/experiments with/without fail branch; empirical slack ‚â§ Œ¥/2.        |                    |                                                                                     |            |                                                  |      |                     |
| DonD          | Returns unbiased estimate                    | Returns                                                                                                     | B                                                  | /p; unbiased by (1) ‚áí (2)                              | Alg D header & Eq. (1)‚Äì(2): ,                                         | Uniform deviates; independence; buffer limit s                                    | B, p, A            | Monte-Carlo on distinct-only streams; mean(                                         | B          | /p) ‚âà true F‚ÇÄ.                                   |      |                     |
| DonD          | Fairness / cutoff invariant (Lemma M)        | (a, u_last) ‚àà B at step D2 ‚áî u_last < p_t                                                                   | Lemma M:                                           | p changes only in D6; u‚Äôs i.i.d. U[0,1)                | p_t, u_j                                                              | For random stream, sample many last-appearance u; estimate Pr[u<p] vs membership. |                    |                                                                                     |            |                                                  |      |                     |
| DonD          | Memory bound                                 | Data structure holds up to s pairs; final                                                                   | B                                                  | =s and p is (s+1)-st order statistic                   | Capacity & ‚ÄúAnswers to Exercises‚Äù #3: ,                               | s‚â•1 fixed                                                                         | s, B, p, U_{m,s+1} | Track                                                                               | B          | during runs; verify final                        | B    | =s and p‚âàU_{m,s+1}. |
| DonD          | Per-update time (expected)                   | Treap depths ‚â≤ 2 ln s ‚áí ops efficient on average (dictionary+max-heap)                                      | Implementation note w/ treap depth:                | Use treap for (a,u) keyed by a, heap-by u              | s                                                                     | Measure insert/delete/max time vs. s; fit to O(log s).                            |                    |                                                                                     |            |                                                  |      |                     |
| DonD vs DonD‚Ä≤ | Exact guard distinguishing D‚Ä≤ from D         | D6‚Ä≤: while u<p and                                                                                          | B                                                  | =s, if u‚â§max(u‚Ä≤) set p‚Üêp/2 and try again; else insert  | D6‚Ä≤ step (differences from D6):                                       | Same inputs as D; geometric halving when max unchanged                            | p, u, u‚Ä≤           | Instrument D and D‚Ä≤; log when D‚Ä≤ halves vs D swaps; confirm behavior matches guard. |            |                                                  |      |                     |
| DonD          | Cutoff abstraction = Cutoff[U,maxscr]        | Formal Cutoff framework; DonD‚â°Cutoff[U,maxscr]                                                              | Sec. 2.2:                                          | Scores qt~U; cutoff C(L,p)=maxscr(L)                   | U, maxscr                                                             | Re-implement via Cutoff skeleton; diff-test vs reference D.                       |                    |                                                                                     |            |                                                  |      |                     |
| DonD‚Ä≤         | Geometric-like scoring                       | DonD‚Ä≤‚â°Cutoff[G‚àû,maxscr]; discrete DonD‚Ä≤ uses G_N‚Ä≤                                                           | Sec. 2.3:                                          | q_t‚àºG‚àû (or G_N‚Ä≤); g maps U‚ÜíG‚àû                          | G‚àû, G_N‚Ä≤, g                                                           | Sample with G‚àû; verify same set evolution as Knuth‚Äôs D‚Ä≤.                          |                    |                                                                                     |            |                                                  |      |                     |
| DonD/DonD‚Ä≤    | Fairness definition (credit-score invariant) | ‚ÄúFair algorithm‚Äù formalization (last score governs membership)                                              | Sec. 3.1 prelude:                                  | Uses Last(¬∑) index; independence of scores             | Last(a,t)                                                             | Log last appearances; verify selection depends only on last score.                |                    |                                                                                     |            |                                                  |      |                     |
| DonD/DonD‚Ä≤    | Unbiasedness in cutoff framework             | Unbiasedness theorem for cutoff algorithms (CVM, DonD, DonD‚Ä≤)                                               | Paper summary & goals:                             | Appropriate linear score distributions                 | FÃÇ‚ÇÄ                                                                   | Estimate mean of                                                                  | L_m                | /D([0,p_m)) over runs; compare to true F‚ÇÄ.                                          |            |                                                  |      |                     |
| DonD/DonD‚Ä≤    | (Œµ,Œ¥) tail bound (choose s)                  | With p‚ÇÄ=1/2: `Pr[E_{p0}] ‚â§ 2¬∑exp(‚àí(s Œµ¬≤)/6) + 4¬∑exp(‚àís/24)`; choose `s ‚â• max{ 24¬∑ln(8m/Œ¥), 6¬∑Œµ‚Åª¬≤¬∑ln(8/Œ¥) }` | Thm 4.7 lines (bounds) and condition lines: ,      | p‚ÇÄ=1/2; Œµ‚àà(0,1); Œ¥‚àà(0,1)                               | s, Œµ, Œ¥, m                                                            | Sweep s; verify failure prob. ‚â≤ Œ¥ for chosen s; report empirical tail.            |                    |                                                                                     |            |                                                  |      |                     |
| CVM‚ÜîCutoff    | CVM as Cutoff with halving                   | CVM1‚Ä≤, CVM2‚Ä≤ expressed as Cutoff[G‚àû, C_CVM]                                                                 | Sec. 2.3 items 3 & 4:                              | G‚àû scoring; halving cutoff; CVM1 aborts if ‚Äúwrong‚Äù max | C_CVM, G‚àû                                                             | Translate CVM into Cutoff; confirm identical transcripts on same scores.          |                    |                                                                                     |            |                                                  |      |                     |

---

### Glossary (normalized notation)

* **A, F‚ÇÄ** ‚Äî number of distinct elements in stream (`A = |{a‚ÇÅ,‚Ä¶,a_‚Ñì}| = F‚ÇÄ`).
* **‚Ñì, m** ‚Äî stream length.
* **s** ‚Äî buffer capacity / bucket limit.
* **B, œá** ‚Äî buffer contents (set of retained keys).
* **p, p_t** ‚Äî cutoff probability after processing t items.
* **u, u‚Ä≤, u_j** ‚Äî uniform (or mapped) ‚Äúscores/volatilities‚Äù tied to appearances.
* **U, U_{m,k}** ‚Äî uniform deviate / k-th order statistic of m i.i.d. uniforms.
* **G‚àû, G_N‚Ä≤** ‚Äî geometric-like score distributions (powers of 1/2; truncated).
* **maxscr(L)** ‚Äî maximum score stored in list L.
* **E_{p0}** ‚Äî error event in Nandi‚ÄìPal‚Äôs analysis when starting from p‚ÇÄ=1/2.
* **Œµ, Œ¥, b** ‚Äî relative-error, failure prob., bits per key.
* **Cutoff[D,C]** ‚Äî abstract algorithm with score distribution D and cutoff-update C.
